# 找隊友功能 - 测试指南

## 🎯 测试目标

测试已完成的功能（M0-M5）：
- ✅ M0: 基础配置
- ✅ M1: 数据库操作
- ✅ M2: 浏览与查看
- ✅ M3: 创建与编辑
- ✅ M4: 申请与通知
- ✅ M5: 仪表板管理

---

## 🚀 快速开始

### 1. 确认服务器运行
```bash
# 开发服务器应该已经在运行
# 访问: http://localhost:3008
```

### 2. 准备测试账号
⚠️ **重要**: 由于需要 Firebase Admin SDK，部分功能可能需要配置后才能完整测试。

#### 如果未配置 Firebase：
- 前端 UI 可以正常浏览
- API 调用会失败（这是预期的）
- 可以测试所有页面的 UI 和交互

#### 如果已配置 Firebase：
- 所有功能可以完整测试
- 需要先注册/登录账号

---

## 📋 测试清单

### Phase 1: UI 浏览测试（无需登录）

#### ✅ 1.1 找隊友列表页
**URL**: http://localhost:3008/team-up

**测试点**:
- [ ] 页面能正常加载
- [ ] 顶部间距正确（不顶到导航栏）
- [ ] 「+ 發布需求」按钮显示
- [ ] 搜索栏显示
- [ ] 筛选面板显示（赛道、阶段、角色、状态、排序）
- [ ] 空状态提示显示（如果没有数据）
- [ ] 页面响应式布局正常

**预期结果**:
- 如果未配置 Firebase：显示空状态或加载错误（正常）
- 如果已配置 Firebase：显示需求列表或空状态

---

#### ✅ 1.2 需求详情页
**URL**: http://localhost:3008/team-up/[任意ID]

**测试点**:
- [ ] 页面能正常加载
- [ ] 显示「找不到此需求」（如果ID不存在）
- [ ] 返回按钮显示
- [ ] 「申請加入」按钮显示
- [ ] 页面布局美观

---

#### ✅ 1.3 创建需求页
**URL**: http://localhost:3008/team-up/create

**测试点**:
- [ ] 页面能正常加载
- [ ] 未登录时显示登录提示
- [ ] 表单布局完整
- [ ] 「發布需求」按钮显示

---

#### ✅ 1.4 仪表板页
**URL**: http://localhost:3008/dashboard/team-up

**测试点**:
- [ ] 页面能正常加载
- [ ] 未登录时显示登录提示
- [ ] 统计卡片显示
- [ ] 标签切换显示

---

### Phase 2: 导航集成测试

#### ✅ 2.1 主导航菜单
**位置**: 顶部导航栏

**测试点**:
- [ ] 「找隊友」链接显示在导航栏中
- [ ] 点击跳转到 /team-up 页面
- [ ] 导航栏在所有页面正常显示

---

### Phase 3: 表单交互测试（无需后端）

#### ✅ 3.1 需求表单 (NeedForm)
**位置**: /team-up/create

**测试点**:
- [ ] 标题输入框（最多100字）
- [ ] 专案赛道下拉选择
- [ ] 专案阶段下拉选择
- [ ] 简介输入框（最多400字）
- [ ] 角色选择器（RoleSelector）
- [ ] 现有成员角色选择
- [ ] 其他需求输入（最多200字）
- [ ] 联系提示输入（最多60字）
- [ ] 字数计数器实时更新
- [ ] PII 验证实时提示
- [ ] 输入 Email 时显示警告
- [ ] 输入电话时显示警告
- [ ] 输入 URL 时显示警告

**测试步骤**:
1. 访问 /team-up/create（会提示登录）
2. 在简介中输入 "test@email.com"
3. 应该看到红色警告提示

---

#### ✅ 3.2 搜索和筛选
**位置**: /team-up

**测试点**:
- [ ] 搜索框输入关键词
- [ ] 选择不同赛道
- [ ] 选择不同阶段
- [ ] 选择不同角色
- [ ] 切换「只看開放」
- [ ] 更改排序方式
- [ ] 筛选器实时响应

---

### Phase 4: 完整功能测试（需要 Firebase 配置）

⚠️ **此部分需要配置 Firebase Admin SDK**

#### 🔐 4.1 准备工作
1. 配置 `.env.local` 文件（参考 `docs/team-up-deployment-guide.md`）
2. 重启开发服务器
3. 注册两个测试账号：
   - 用户A（发布需求）
   - 用户B（申请需求）

---

#### ✅ 4.2 用户A：发布需求流程

**步骤**:
1. 登录用户A
2. 访问 http://localhost:3008/team-up/create
3. 填写表单：
   - 标题: "测试专案 - DeFi 钱包"
   - 赛道: DeFi
   - 阶段: 有想法，还没动工
   - 简介: "开发一个简单的 DeFi 钱包应用"
   - 需要角色: 前端工程师, 智能合约工程师
   - 现有角色: 产品经理
   - 联系提示: "请加 Line ID: test123"
4. 点击「發布需求」

**预期结果**:
- [ ] 成功提示弹出
- [ ] 跳转到需求详情页
- [ ] 需求信息正确显示
- [ ] 「編輯需求」按钮显示（因为是作者）

---

#### ✅ 4.3 验证列表页
**URL**: http://localhost:3008/team-up

**测试点**:
- [ ] 刚发布的需求出现在列表中
- [ ] 卡片信息正确
- [ ] 点击卡片跳转到详情页

---

#### ✅ 4.4 用户A：编辑需求
**步骤**:
1. 在详情页点击「編輯需求」
2. 修改标题为 "测试专案 - DeFi 钱包 V2"
3. 点击「更新需求」

**预期结果**:
- [ ] 成功提示弹出
- [ ] 跳转回详情页
- [ ] 标题已更新

---

#### ✅ 4.5 用户B：申请需求
**步骤**:
1. 登出用户A，登录用户B
2. 访问刚才的需求详情页
3. 点击「申請加入」按钮
4. 填写申请表单：
   - 留言: "你好，我有3年前端经验，擅长 React"
   - 联系方式: "Line ID: userb123"
5. 提交申请

**预期结果**:
- [ ] 成功提示弹出
- [ ] （如果配置了 Email）用户A 收到邮件通知
- [ ] （如果配置了通知）用户A 收到站内通知

---

#### ✅ 4.6 用户A：查看仪表板
**URL**: http://localhost:3008/dashboard/team-up

**步骤**:
1. 登出用户B，重新登录用户A
2. 访问仪表板

**测试点**:
- [ ] 统计卡片显示：
  - 我的需求: 1
  - 我的申请: 0
  - 待处理申请: 1
- [ ] 「我的需求」标签：
  - [ ] 显示刚发布的需求
  - [ ] 显示统计信息（1个申请，1个未读）
  - [ ] 未读徽章显示
- [ ] 「管理申請」按钮显示

---

#### ✅ 4.7 用户A：管理申请
**步骤**:
1. 点击「管理申請」按钮
2. 查看申请列表

**测试点**:
- [ ] 需求信息显示正确
- [ ] 过滤器显示：全部(1), 待处理(1), 已接受(0), 已拒绝(0)
- [ ] 申请卡片显示：
  - [ ] 蓝色边框（未读）
  - [ ] 用户B的信息
  - [ ] 留言内容
  - [ ] 联系方式高亮显示
- [ ] 「✓ 接受」和「✕ 拒绝」按钮显示

**操作**:
3. 点击「✓ 接受」按钮
4. 确认操作

**预期结果**:
- [ ] 成功提示
- [ ] 状态变为「已接受」
- [ ] 过滤器更新：待处理(0), 已接受(1)
- [ ] （如果配置了 Email）用户B 收到邮件
- [ ] （如果配置了通知）用户B 收到站内通知

---

#### ✅ 4.8 用户B：查看仪表板
**步骤**:
1. 登出用户A，重新登录用户B
2. 访问 http://localhost:3008/dashboard/team-up
3. 切换到「我的申請」标签

**测试点**:
- [ ] 统计卡片显示：
  - 我的需求: 0
  - 我的申请: 1
  - 待处理申请: 0
- [ ] 申请列表显示：
  - [ ] 状态：已接受（绿色）
  - [ ] 需求标题正确
  - [ ] 我的留言显示
  - [ ] 我的联系方式显示
  - [ ] 绿色提示框显示「✅ 恭喜！您的申請已被接受」
  - [ ] 对方的联系提示显示：「请加 Line ID: test123」

---

### Phase 5: API 测试（使用 curl 或 Postman）

#### ✅ 5.1 获取需求列表
```bash
curl http://localhost:3008/api/team-up/needs?sort=latest&limit=20
```

**预期**: 返回 JSON 格式的需求列表

---

#### ✅ 5.2 获取单个需求
```bash
curl http://localhost:3008/api/team-up/needs/[需求ID]
```

**预期**: 返回单个需求的详细信息

---

#### ✅ 5.3 获取统计
```bash
curl http://localhost:3008/api/team-up/stats
```

**预期**: 返回统计信息

---

### Phase 6: 响应式测试

#### ✅ 6.1 移动端视图
**测试设备**: Chrome DevTools (iPhone 12)

**测试页面**:
- [ ] /team-up (列表页)
- [ ] /team-up/[id] (详情页)
- [ ] /team-up/create (创建页)
- [ ] /dashboard/team-up (仪表板)

**测试点**:
- [ ] 布局不破坏
- [ ] 文字大小适中
- [ ] 按钮可点击
- [ ] 筛选面板可展开/收起
- [ ] 表单输入正常

---

#### ✅ 6.2 平板视图
**测试设备**: Chrome DevTools (iPad)

**测试点**: 同上

---

### Phase 7: 边界情况测试

#### ✅ 7.1 字数限制
**位置**: /team-up/create

**测试**:
- [ ] 标题输入101个字符 → 应该被限制在100
- [ ] 简介输入401个字符 → 应该被限制在400
- [ ] 其他需求输入201个字符 → 应该被限制在200
- [ ] 联系提示输入61个字符 → 应该被限制在60

---

#### ✅ 7.2 PII 检测
**位置**: /team-up/create

**测试输入**:
```
简介内容：
"联系我 test@example.com 或拨打 0912-345-678
也可以加我的 Line ID: abc123
网站: https://example.com"
```

**预期**: 
- [ ] 显示多个红色警告
- [ ] 无法提交表单
- [ ] 错误提示清晰

---

#### ✅ 7.3 空状态
**测试场景**:
- [ ] 没有需求时的列表页
- [ ] 没有搜索结果时
- [ ] 没有申请时的仪表板
- [ ] 没有我的需求时
- [ ] 没有我的申请时

**预期**: 所有空状态都有友好的提示和引导

---

## 🐛 已知问题

### 如果未配置 Firebase Admin SDK:
1. **问题**: API 调用失败
   - **表现**: 控制台出现 "FirebaseAppError" 错误
   - **影响**: 无法创建/获取数据
   - **解决**: 配置 Firebase Admin SDK（参考 deployment-guide.md）

2. **问题**: SSR 数据获取失败
   - **表现**: 页面显示空状态
   - **影响**: 服务器端渲染的数据为空
   - **解决**: 前端会自动降级到客户端获取

3. **问题**: Email 通知不发送
   - **表现**: 控制台显示 "[Email] SendGrid not configured"
   - **影响**: 不发送邮件（会输出到控制台）
   - **解决**: 配置 SendGrid API Key（可选）

---

## ✅ 测试通过标准

### UI 测试
- [ ] 所有页面能正常加载
- [ ] 布局美观，无错位
- [ ] 响应式布局正常
- [ ] 字体、颜色、间距合理

### 功能测试
- [ ] 浏览需求列表
- [ ] 查看需求详情
- [ ] 搜索和筛选
- [ ] 创建需求（需Firebase）
- [ ] 编辑需求（需Firebase）
- [ ] 申请需求（需Firebase）
- [ ] 管理申请（需Firebase）
- [ ] 查看仪表板（需Firebase）

### 交互测试
- [ ] 表单验证正确
- [ ] 按钮响应及时
- [ ] 跳转链接正确
- [ ] 错误提示友好

### 性能测试
- [ ] 页面加载快速（< 3秒）
- [ ] 筛选操作流畅
- [ ] 无明显卡顿

---

## 📝 测试报告模板

```
测试日期: 2025/10/10
测试人员: [Your Name]
测试环境: Chrome 最新版 / macOS

【Phase 1: UI 浏览测试】
✅ 列表页加载正常
✅ 详情页布局正确
⚠️  创建页未测试（需登录）

【Phase 2: 导航集成】
✅ 导航菜单显示正确
✅ 跳转功能正常

【Phase 3: 表单交互】
✅ PII 验证工作正常
✅ 字数限制正确

【Phase 4: 完整功能】
❌ 未配置 Firebase，跳过

【Phase 5: API 测试】
❌ 未配置 Firebase，跳过

【Phase 6: 响应式】
✅ 移动端布局正常
✅ 平板端布局正常

【Phase 7: 边界情况】
✅ 所有边界情况处理正确

【问题记录】
1. [问题描述]
2. [问题描述]

【总体评价】
UI 实现完整，交互流畅，响应式设计良好。
建议配置 Firebase 后进行完整功能测试。
```

---

## 🚀 下一步

测试完成后：
1. ✅ 记录所有发现的问题
2. ✅ 决定是否需要修复 bugs
3. ✅ 决定是否继续 M6（安全加固）
4. ✅ 决定是否直接部署测试

---

**开始测试**: http://localhost:3008/team-up

祝测试顺利！🎉

